(this["webpackJsonperc20-exchange-app"]=this["webpackJsonperc20-exchange-app"]||[]).push([[0],{1068:function(e,t,n){},1397:function(e,t){},1399:function(e,t){},1408:function(e,t){},1410:function(e,t){},1436:function(e,t){},1438:function(e,t){},1439:function(e,t){},1444:function(e,t){},1446:function(e,t){},1453:function(e,t){},1455:function(e,t){},1473:function(e,t){},1475:function(e,t){},1487:function(e,t){},1490:function(e,t){},1575:function(e,t){},1717:function(e,t){},1974:function(e,t){},2137:function(e,t){},2350:function(e,t){},2647:function(e,t){},2653:function(e,t){},2681:function(e,t){},2682:function(e,t){},2730:function(e,t){},2741:function(e,t){},2744:function(e,t){},2796:function(e,t,n){},2797:function(e){e.exports=JSON.parse('{"EthereumAddress":"H160","EcdsaSignature":"[u8; 65]","EthereumTxHash":"H256"}')},2798:function(e,t,n){"use strict";n.r(t);var a=n(25),s=n(0),c=n.n(s),r=n(110),i=n.n(r),o=(n(1068),n(1059)),u=n(42),l=n.n(u),p=n(176),d=n(9),b=n(32),y=n(118),j=n(299),x=n(30),h=n(562),f=n(2801),m=n(414),O=n.n(m),g=n(1062),v=n.n(g),w={main:{etherscanBase:"https://etherscan.io",tokenAddress:""},kovan:{etherscanBase:"https://kovan.etherscan.io",tokenAddress:"0x837421ED118Ec24a000A962c6314D580b8ae6C8e"}};var T=w.kovan.etherscanBase,k=w.kovan.tokenAddress,S=[{constant:!1,inputs:[{internalType:"address",name:"account",type:"address"}],name:"addPauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"initialSupply",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"}],name:"PauserAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"}],name:"PauserRemoved",type:"event"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"renouncePauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"isPauser",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],C=(n(2796),n(2797)),M=new v.a({cacheProvider:!0,providerOptions:{}});function F(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)("header",{className:"App-header",children:Object(a.jsx)("h1",{children:"Loading"})})})}function B(){var e=Object(f.a)().t,t=Object(b.useMediaQuery)("xs")?{width:"100%"}:{},n=Object(s.useState)(null),c=Object(d.a)(n,2),r=c[0],i=c[1],u=Object(s.useState)([]),m=Object(d.a)(u,2),g=m[0],v=m[1],w=Object(s.useState)("notconnected"),F=Object(d.a)(w,2),B=(F[0],F[1]),H=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,J(!0),e.next=4,M.connect();case 4:if(!(t=e.sent)){e.next=17;break}return t.on&&(t.on("accountsChanged",(function(e){console.log(e)})),t.on("chainChanged",(function(e){console.log(e)})),t.on("connect",(function(e){console.log(e)})),t.on("disconnect",(function(e){console.log(e)}))),n=new O.a(t),i(t),e.next=11,n.eth.getAccounts();case 11:a=e.sent,v(a),B("connected"),_("burn"),J(!1),J(!1);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),J(!1),I({text:"Failed: "+e.t0.message,type:"error"});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.close){e.next=3;break}return e.next=3,r.close();case 3:M.clearCachedProvider(),i(null),B("notconnected"),_("burn"),v([]),J(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=Object(b.useToasts)(),D=Object(d.a)(E,2),I=(D[0],D[1]),P=Object(s.useState)("burn"),R=Object(d.a)(P,2),L=R[0],_=R[1],V=Object(s.useState)(!1),N=Object(d.a)(V,2),W=N[0],J=N[1],q=function(){pe(le),je(ye),_("burn")},G=function(){z(Y),ee($),_("claim")},Q=Object(s.useState)(""),U=Object(d.a)(Q,2),Y=U[0],z=U[1],K=function(e){z(e.target.value),console.log(e.target.value)},X=Object(s.useState)(""),Z=Object(d.a)(X,2),$=Z[0],ee=Z[1],te=Object(s.useState)(""),ne=Object(d.a)(te,2),ae=ne[0],se=ne[1],ce=Object(s.useRef)(null),re=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,a,s,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",e.prev=1,J(!0),48!==$.length||66!==Y.length){e.next=17;break}return n=(n=Object(x.u8aToHex)(Object(j.decodeAddress)($))).substr(2,n.length-2),a=Y.substr(2,Y.length-2),s=n+a,c=new O.a(r),i=c.utils.utf8ToHex("\x19Ethereum Signed Message:\n"+s.length/2),e.next=12,c.eth.sign(c.utils.sha3(i+s),g[0]);case 12:t=e.sent,se(t),I({text:"Success",type:"success"}),e.next=18;break;case 17:I({text:"Failed: Invalid address or txHash format",type:"error"});case 18:J(!1),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(1),J(!1),I({text:"Failed: "+e.t0.message,type:"error"});case 25:ce&&(ce.current.value=t);case 26:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,a,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,J(!0),48===$.length&&66===Y.length){e.next=7;break}Object(x.u8aToHex)(Object(j.decodeAddress)($)),I({text:"Failed: Invalid address or txHash format",type:"error"}),e.next=35;break;case 7:if(""!==ae){e.next=11;break}I({text:"Failed: No signature",type:"error"}),e.next=35;break;case 11:return t=new h.WsProvider("wss://127.0.0.1:9944"),e.next=14,h.ApiPromise.create({provider:t,types:C});case 14:return n=e.sent,e.next=17,Object(j.cryptoWaitReady)();case 17:return e.next=19,n.query.claimModule.burnedTransactions(Y);case 19:return a=e.sent,e.next=22,n.query.claimModule.claimState(Y);case 22:if(s=e.sent,console.log(s.toString()),"0x0000000000000000000000000000000000000000"!==a[0].toString()){e.next=28;break}I({text:"Failed: Your txHash is in crawling, please wait 2 minutes",type:"error"}),e.next=35;break;case 28:if("true"!==s.toString()){e.next=32;break}I({text:"Failed: This txHash has been claimed",type:"error"}),e.next=35;break;case 32:return c=n.tx.claimModule.claimErc20Token($,Y,ae),e.next=35,new Promise(function(){var e=Object(p.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.send((function(e){var n=e.events,a=void 0===n?[]:n,s=e.status;if(s.isInBlock){var c,r,i=Object(o.a)(a);try{for(i.s();!(r=i.n()).done;){var u=r.value.event,l=u.data,p=u.method;"system"===u.section&&"ExtrinsicFailed"===p&&(c=l[0])}}catch(d){i.e(d)}finally{i.f()}if(c)throw new Error("Extrinsic failed : ".concat(c));t({hash:s.asInBlock,events:a}),I({text:"Success included in ".concat(s.asInBlock),type:"success"})}else if(s.isInvalid)throw new Error("Invalid transaction")}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 35:J(!1),e.next=42;break;case 38:e.prev=38,e.t0=e.catch(0),J(!1),I({text:"Failed: "+e.t0.message,type:"error"});case 42:case"end":return e.stop()}}),e,null,[[0,38]])})));return function(){return e.apply(this,arguments)}}(),oe=Object(s.useState)(.1),ue=Object(d.a)(oe,2),le=ue[0],pe=ue[1],de=Object(s.useState)("0x000000000000000000000000000000000000dead"),be=Object(d.a)(de,2),ye=be[0],je=be[1],xe=Object(s.useState)(""),he=Object(d.a)(xe,2),fe=he[0],me=he[1],Oe=Object(s.useRef)(null),ge=Object(s.useState)(""),ve=Object(d.a)(ge,2),we=ve[0],Te=ve[1],ke=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,a,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Send transaction to burn ERC20 tokens and get txHash which can used to claim Substrate tokens, the exchange ratio is 1:1"),t="",e.prev=2,J(!0),n=new O.a(r),i=n,console.log("Loading contract",k),a=new i.eth.Contract(S,k),s=n.utils.toWei(le.toString()),e.next=9,a.methods.transfer(ye,s).send({from:g[0]});case 9:c=e.sent,z(c.transactionHash),me(c.transactionHash),Te(T+"/tx/"+c.transactionHash),I({text:"Success",type:"success"}),t=c.transactionHash,J(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),J(!1),I({text:"Failed: "+e.t0.message,type:"error"});case 22:Oe&&(Oe.current.value=t);case 23:case"end":return e.stop()}var i}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(b.Page,{children:[Object(a.jsx)(b.Spacer,{}),Object(a.jsxs)(b.Page.Header,{children:[Object(a.jsxs)(b.Text,{h3:!0,style:{marginTop:"20px"},color:!0,children:["ERC20 ",e("Exchange App")]}),Object(a.jsxs)(b.Text,{small:!0,className:"links",children:[Object(a.jsx)(b.Link,{href:"#",color:!0,target:"_blank",children:"Home"}),Object(a.jsx)(b.Link,{href:"#",color:!0,target:"_blank",children:"Telegram"})]})]}),Object(a.jsx)(b.Page.Content,{children:Object(a.jsxs)(b.Col,{children:[Object(a.jsxs)(b.Row,{children:[!r&&Object(a.jsx)(b.Button,{icon:Object(a.jsx)(y.LogIn,{}),auto:!0,shadow:!0,ghost:!0,type:"secondary",onClick:H,disabled:W,children:e("Connect Wallet")}),r&&Object(a.jsx)(b.Button,{icon:Object(a.jsx)(y.LogOut,{}),auto:!0,shadow:!0,ghost:!0,type:"secondary",onClick:A,disabled:W,children:e("Disconnect Wallet")})]}),Object(a.jsx)(b.Spacer,{}),Object(a.jsx)(b.Input,{readOnly:!0,initialValue:g[0],onChange:K,width:"80%",children:Object(a.jsx)(b.Description,{title:e("ETH Account")})}),Object(a.jsx)(b.Spacer,{}),g.length>0&&Object(a.jsxs)(b.Col,{children:["claim"===L&&Object(a.jsxs)(b.Col,{children:[Object(a.jsxs)(b.Row,{children:[Object(a.jsx)(b.Button,{icon:Object(a.jsx)(y.Circle,{}),auto:!0,ghost:!0,style:{color:"#888"},onClick:q,disabled:W,children:e("Burn Tokens")}),Object(a.jsx)(b.Button,{icon:Object(a.jsx)(y.Disc,{}),auto:!0,shadow:!0,type:"secondary",onClick:G,disabled:W,children:e("Claim Tokens")})]}),Object(a.jsx)(b.Spacer,{}),Object(a.jsx)(b.Input,{clearable:!0,placeholder:e("ss58 format"),initialValue:$,onChange:function(e){ee(e.target.value),console.log(e.target.value)},width:"80%",children:Object(a.jsx)(b.Description,{title:e("Substrate Address")})}),Object(a.jsx)(b.Spacer,{}),Object(a.jsx)(b.Input,{clearable:!0,placeholder:e("0x prefixed hex"),initialValue:Y,onChange:K,width:"80%",children:Object(a.jsx)(b.Description,{title:e("ETH TxHash")})}),Object(a.jsx)(b.Spacer,{}),Object(a.jsxs)(b.Row,{children:[Object(a.jsx)(b.Button,{icon:Object(a.jsx)(y.Edit3,{}),auto:!0,shadow:!0,ghost:!0,type:"secondary",onClick:re,style:t,disabled:W,children:e("Sign Message")}),Object(a.jsx)(b.Spacer,{x:1}),Object(a.jsx)(b.Button,{icon:Object(a.jsx)(y.Repeat,{}),auto:!0,shadow:!0,ghost:!0,type:"secondary",onClick:ie,style:t,disabled:W,children:e("Claim")})]}),Object(a.jsx)(b.Spacer,{}),Object(a.jsx)(b.Input,{readOnly:!0,initialValue:ae,onChange:function(e){return console.log(e.target.value)},ref:ce,width:"80%",children:Object(a.jsx)(b.Description,{title:e("Signature")})})]}),"burn"===L&&Object(a.jsxs)(b.Col,{children:[Object(a.jsxs)(b.Row,{children:[Object(a.jsx)(b.Button,{icon:Object(a.jsx)(y.Disc,{}),auto:!0,shadow:!0,type:"secondary",onClick:q,disabled:W,children:e("Burn Tokens")}),Object(a.jsx)(b.Button,{icon:Object(a.jsx)(y.Circle,{}),auto:!0,ghost:!0,style:{color:"#888"},onClick:G,disabled:W,children:e("Claim Tokens")})]}),Object(a.jsx)(b.Spacer,{}),Object(a.jsx)(b.Input,{clearable:!0,placeholder:e(""),onChange:function(e){pe(e.target.value),console.log(e.target.value)},width:"80%",children:Object(a.jsx)(b.Description,{title:e("Burn Amount")})}),Object(a.jsx)(b.Spacer,{}),Object(a.jsx)(b.Input,{readOnly:!0,placeholder:e(""),initialValue:"0x000000000000000000000000000000000000dead",onChange:function(e){je(e.target.value),console.log(e.target.value)},width:"80%",children:Object(a.jsx)(b.Description,{title:e("Burn ToAddress")})}),Object(a.jsx)(b.Spacer,{}),Object(a.jsx)(b.Button,{icon:Object(a.jsx)(y.FileText,{}),auto:!0,shadow:!0,ghost:!0,type:"secondary",onClick:ke,style:t,disabled:W,children:e("Send Transaction")}),Object(a.jsx)(b.Spacer,{}),Object(a.jsx)(b.Input,{readOnly:!0,initialValue:fe,onChange:function(e){return console.log(e.target.value)},ref:Oe,width:"80%",children:Object(a.jsx)(b.Description,{title:e("ETH TxHash")})}),Object(a.jsx)(b.Spacer,{}),""!==fe&&Object(a.jsx)(b.Row,{children:Object(a.jsx)(b.Text,{small:!0,children:Object(a.jsxs)(b.Link,{href:we,color:!0,target:"_blank",children:[" ",we," "]})})})]})]})]})})]})})}var H={palette:{accents_1:"#111",accents_2:"#333",accents_3:"#444",accents_4:"#666",accents_5:"#888",accents_6:"#999",accents_7:"#eaeaea",accents_8:"#fafafa",background:"#000",foreground:"#fff",selection:"#D1FF52",secondary:"#888",success:"#708634",successLight:"#D1FF52",successDark:"#D1FF52",code:"#79ffe1",border:"#333",link:"#D1FF52"},expressiveness:{dropdownBoxShadow:"0 0 0 1px #333",shadowSmall:"0 0 0 1px #333",shadowMedium:"0 0 0 1px #333",shadowLarge:"0 0 0 1px #333",portalOpacity:.8}};var A=function(){return Object(a.jsxs)(b.GeistProvider,{theme:H,children:[Object(a.jsx)(b.CssBaseline,{}),Object(a.jsx)(s.Suspense,{fallback:Object(a.jsx)(F,{}),children:Object(a.jsx)(B,{})})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,2802)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(A,{})}),document.getElementById("root")),E()}},[[2798,1,2]]]);
//# sourceMappingURL=main.45e47033.chunk.js.map